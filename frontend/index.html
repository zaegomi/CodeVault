<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeVault - Text Steganography Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CodeVault</h1>
            <p>Universal Text-Based Steganography Platform</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('encode')">üîê Encode Messages</button>
            <button class="nav-tab" onclick="switchTab('decode')">üîì Decode Messages</button>
        </div>

        <!-- ENCODING TAB -->
        <div id="encodeTab" class="tab-content active">
            <div class="main-content">
                <div class="panel">
                    <h2>Secret Message</h2>
                    <div class="form-group">
                        <label for="secretMessage">Enter your secret message:</label>
                        <input type="text" id="secretMessage" placeholder="Type your hidden message here..." maxlength="500">
                    </div>
                    
                    <div class="form-group">
                        <label for="encryptionMethod">Select Encoding Method:</label>
                        <select id="encryptionMethod">
                            <option value="els">Equidistant Letter Sequence (ELS)</option>
                            <option value="acrostic">Acrostic Method</option>
                            <option value="punctuation">Punctuation Pattern</option>
                            <option value="null">Null Cipher</option>
                        </select>
                    </div>

                    <!-- AI Text Generation Controls -->
                    <div class="ai-generation-panel">
                        <h3>ü§ñ AI Carrier Text Generation</h3>
                        <div class="form-group">
                            <label for="aiTopic">Topic for carrier text:</label>
                            <input type="text" id="aiTopic" placeholder="e.g., technology, nature, business..." value="technology">
                        </div>
                        
                        <div class="form-group">
                            <label for="aiStyle">Writing style:</label>
                            <select id="aiStyle">
                                <option value="casual">Casual</option>
                                <option value="academic">Academic</option>
                                <option value="business">Business</option>
                                <option value="creative">Creative</option>
                                <option value="news">News</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="aiLength">Text length (words):</label>
                            <input type="number" id="aiLength" min="50" max="1000" value="200">
                        </div>
                        
                        <button class="ai-generate-btn" id="generateAIText">üöÄ Generate AI Carrier Text</button>
                        
                        <div class="backend-status" id="backendStatus">
                            <small>
                                <span id="statusIndicator">üîÑ</span>
                                <span id="statusText">Checking backend connection...</span>
                                <button class="retry-btn" id="retryConnection" style="display: none;">Retry</button>
                            </small>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <h2>Carrier Text</h2>
                    <div class="form-group">
                        <label for="carrierText">Enter or paste your carrier text:</label>
                        <textarea id="carrierText" placeholder="Enter the text that will hide your message..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Or upload a text file:</label>
                        <div class="file-upload">
                            <input type="file" id="fileUpload" accept=".txt">
                            <div class="file-upload-btn">üìÅ Upload Text File</div>
                        </div>
                    </div>

                    <!-- Text Analysis Display -->
                    <div id="textAnalysis" class="text-analysis hidden">
                        <h4>üìä Text Analysis</h4>
                        <div class="analysis-stats">
                            <div class="analysis-item">
                                <span class="analysis-label">Word Count:</span>
                                <span class="analysis-value" id="wordCount">0</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Character Count:</span>
                                <span class="analysis-value" id="charCount">0</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Suitability:</span>
                                <span class="analysis-value" id="suitability">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="control-panel">
                <button class="start-btn" id="startBtn">START ENCODING</button>
            </div>
        </div>

        <!-- DECODING TAB -->
        <div id="decodeTab" class="tab-content">
            <div class="main-content">
                <div class="panel decode-panel">
                    <h2>üîç Message Decoder</h2>
                    <div class="form-group">
                        <label for="encodedText">Enter the encoded text:</label>
                        <textarea id="encodedText" placeholder="Paste the text that contains the hidden message..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Or upload an encoded text file:</label>
                        <div class="file-upload">
                            <input type="file" id="decodeFileUpload" accept=".txt">
                            <div class="file-upload-btn">üìÅ Upload Encoded File</div>
                        </div>
                    </div>

                    <!-- Method Detection/Selection -->
                    <div class="method-detection">
                        <h4>üîç Encoding Method Detection</h4>
                        <div class="form-group">
                            <label for="decodeMethod">Select or let us detect the method:</label>
                            <select id="decodeMethod">
                                <option value="auto">ü§ñ Auto-Detect Method</option>
                                <option value="els">Equidistant Letter Sequence (ELS)</option>
                                <option value="acrostic">Acrostic Method</option>
                                <option value="punctuation">Punctuation Pattern</option>
                                <option value="null">Null Cipher</option>
                            </select>
                        </div>
                        
                        <div id="detectedMethodInfo" class="hidden">
                            <p><strong>Detected Method:</strong> <span class="detected-method" id="detectedMethod">-</span></p>
                            <p><small id="detectionConfidence">-</small></p>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <h2>üìä Decoding Analysis</h2>
                    <div id="decodeAnalysis" class="text-analysis hidden">
                        <h4>Text Pattern Analysis</h4>
                        <div class="analysis-stats">
                            <div class="analysis-item">
                                <span class="analysis-label">Total Words:</span>
                                <span class="analysis-value" id="decodeWordCount">0</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Total Characters:</span>
                                <span class="analysis-value" id="decodeCharCount">0</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Punctuation Marks:</span>
                                <span class="analysis-value" id="decodePunctCount">0</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Lines:</span>
                                <span class="analysis-value" id="decodeLineCount">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 20px;">
                        <h4>üí° Decoding Tips</h4>
                        <div id="decodingTips" style="font-size: 0.9rem; color: #4a5568; line-height: 1.5;">
                            <p>‚Ä¢ <strong>ELS:</strong> Looks for patterns of letters at regular intervals</p>
                            <p>‚Ä¢ <strong>Acrostic:</strong> Reads first letters of each line or paragraph</p>
                            <p>‚Ä¢ <strong>Punctuation:</strong> Uses periods (0) and exclamation marks (1) as binary</p>
                            <p>‚Ä¢ <strong>Null Cipher:</strong> Reads first letters of consecutive words</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="control-panel">
                <button class="decode-btn" id="decodeBtn">üîì DECODE MESSAGE</button>
            </div>
        </div>

        <!-- Loading Indicators -->
        <div id="aiLoadingDiv" class="loading hidden">
            <div class="spinner"></div>
            <p>AI is generating your carrier text...</p>
            <small>This may take 10-30 seconds</small>
        </div>

        <div id="loadingDiv" class="loading hidden">
            <div class="spinner"></div>
            <p id="loadingText">Processing your message...</p>
        </div>

        <div id="decodeLoadingDiv" class="loading hidden">
            <div class="spinner"></div>
            <p>Analyzing and decoding your message...</p>
        </div>

        <!-- Results for Encoding -->
        <div id="resultsDiv" class="results hidden">
            <h2>Encoded Result</h2>
            <div id="resultText" class="result-text"></div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="methodUsed">-</div>
                    <div class="stat-label">Method Used</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="textLength">-</div>
                    <div class="stat-label">Text Length</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="hiddenChars">-</div>
                    <div class="stat-label">Hidden Characters</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="securityScore">-</div>
                    <div class="stat-label">Security Score</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" id="copyBtn">üìã Copy Result</button>
                <button class="action-btn" id="downloadBtn">üíæ Download</button>
                <button class="action-btn" id="testDecodeBtn">üîì Test Decode</button>
                <button class="action-btn reset-btn" id="resetBtn">üîÑ Reset</button>
            </div>
        </div>

        <!-- Results for Decoding -->
        <div id="decodeResultsDiv" class="results hidden">
            <h2>üéâ Decoded Message</h2>
            
            <div class="decoded-message">
                <h3>Hidden Message Found:</h3>
                <div class="message" id="decodedMessage">No message decoded yet</div>
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="usedMethod">-</div>
                    <div class="stat-label">Decoding Method</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="messageLength">-</div>
                    <div class="stat-label">Message Length</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="decodingTime">-</div>
                    <div class="stat-label">Processing Time</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="confidence">-</div>
                    <div class="stat-label">Confidence</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" id="copyDecodedBtn">üìã Copy Message</button>
                <button class="action-btn" id="downloadDecodedBtn">üíæ Download Message</button>
                <button class="action-btn" id="analyzeBtn">üìä View Analysis</button>
                <button class="action-btn reset-btn" id="resetDecodeBtn">üîÑ Reset Decoder</button>
            </div>
        </div>

        <!-- Error and Success Messages -->
        <div id="errorDiv" class="error hidden">
            <strong>Error:</strong> <span id="errorMessage"></span>
        </div>

        <div id="successDiv" class="success hidden">
            <strong>Success:</strong> <span id="successMessage"></span>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>